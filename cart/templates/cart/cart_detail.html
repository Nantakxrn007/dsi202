{% extends 'base.html' %}
{% load static %}
{% block body_class %}product-detail-page{% endblock %}
{% block header_class %}{% endblock %}  {# ‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏Ñ‡∏•‡∏≤‡∏™ sticky-header #}
{% block content %}
<link rel="stylesheet" href="{% static 'css/cart.css' %}">

<div class="cart-container">
    <h1>üõí ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h1>

    {% if cart_items %}
        <table>
            <thead>
                <tr>
                    <th>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                    <th>‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</th>
                    <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                    <th>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢</th>
                    <th>‡∏£‡∏ß‡∏°</th>
                    <th>‡∏•‡∏î‡∏Ñ‡∏≤‡∏£‡πå‡∏ö‡∏≠‡∏ô</th>
                    <th>‡∏•‡∏ö</th>

                </tr>
            </thead>
            <tbody>
                {% for item in cart_items %}
                <tr>
                    <td>{{ item.product_name }}</td>
                    <td>{{ item.option_name|default:"-" }}</td>
                    <td>{{ item.quantity }}</td>
                    <td>${{ item.price|floatformat:2 }}</td>
                    <td>${{ item.total_price|floatformat:2 }}</td>
                    <td>{{ item.carbon_reduction|default:"0.00"|floatformat:2 }} kg</td>
                    <td>
                        <form method="post" action="{% url 'cart:cart_remove' %}">
                            {% csrf_token %}
                            <input type="hidden" name="product_id" value="{{ item.product_id }}">
                            <input type="hidden" name="option_id" value="{{ item.option_id }}">
                            <button type="submit" class="remove-btn">‚ùå</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <div class="totals">
            <p><strong>‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</strong> ${{ cart_total|floatformat:2 }}</p>
            <p><strong>‡∏£‡∏ß‡∏°‡∏•‡∏î‡∏Ñ‡∏≤‡∏£‡πå‡∏ö‡∏≠‡∏ô:</strong> {{ carbon_total|default:"0.00"|floatformat:2 }} kg</p>
            <form method="post" action="{% url 'cart:cart_clear' %}">
                {% csrf_token %}
                <button type="submit" class="clear-all-btn">üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
            </form>
        </div>
    {% else %}
        <p class="empty-cart">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</p>
    {% endif %}
</div>
{% endblock %}
